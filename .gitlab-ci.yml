image: maven:3-jdk-8

variables:
  ARTIFACTORY_URL: "https://harbor.paluno.uni-due.de/artifactory/libs-release-local/de/uni_due/s3/Evaluator/2.0.0/Evaluator-2.0.0new.jar"
  EVALUATOR_JAR: "/root/.m2/repository/de/uni_due/s3/Evaluator/2.0.0/Evaluator-2.0.0.jar"

stages:
  - build
  - deploy

job1:
  stage: build
  script:
    - "mvn install -B"

job2:
  stage: deploy
  script:
    - "curl -u s3gitlab:$ARTIFACTORY_KEY -X PUT \"$ARTIFACTORY_URL\" -T \"$EVALUATOR_JAR\""